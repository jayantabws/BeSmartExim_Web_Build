{"version":3,"sources":["pages/searchlog.js","assets/image/pencil-square.svg"],"names":["searchBYList","cityDestinationList","cityOriginList","exporterList","hsCode4DigitList","hsCodeList","importerList","portDestinationList","portOriginList","searchValue","relation","searchBy","queryBuilder","withRouter","connect","state","loading","loader","download_count","data","subscriptionId","dataAccess_count","totalWorkspace","subUserCount","queryPerDay","dispatch","loadingStart","loaderStart","loadingStop","loaderStop","updateSubscriptionCount","props","history","useHistory","userId","localStorage","getItem","userData","JSON","parse","_useState","useState","_useState2","_slicedToArray","searchList","setSearchList","_useState3","_useState4","setSearchListData","_useState5","undefined","_useState6","sortName","setSortName","_useState7","_useState8","sortOrder","setSortOrder","useEffect","userID","uplineId","Axios","method","url","concat","then","res","tempQueryList","queryList","length","map","item","index","jsonData","Object","keys","key","Val","subKey","subVal","item2","index2","subitem","subindex","push","catch","err","console","log","getSearchList","options","onSortChange","_jsx","_Fragment","children","className","_jsxs","BootstrapTable","striped","hover","pagination","search","TableHeaderColumn","width","isKey","dataField","dataFormat","cell","row","enumObject","dataSort","filter","elements","moment","fromDate","format","toDate","createdByEmail","createdDate","onClick","pathname","search_id","workspace_id"],"mappings":"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","file":"static/js/5.311db9fe.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Axios from \"../shared/Axios\";\r\nimport moment from 'moment';\r\nimport { useHistory } from 'react-router-dom';\r\nimport imagePencil from '../assets/image/pencil-square.svg';\r\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\r\nimport { loaderStart, loaderStop } from \"../store/actions/loader\";\r\nimport {updateSubscriptionCount} from \"../store/actions/data\"\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n// const searchBYList = { \"HS_CODE\": \"HS Code\", \"PRODUCT\": \"Product\", \"IMPORTER\": \"Importer\", \"EXPORTER\": \"Exporter\" };\r\n\r\nconst searchBYList = {\r\n  cityDestinationList : \"Destination City\",\r\n  cityOriginList : \"City of Origin\", \r\n  exporterList : \"Exporter List\", \r\n  hsCode4DigitList : \"HS Code (4 Digit)\", \r\n  hsCodeList : \"HS Code (8 Digit)\", \r\n  importerList : \"Importer List\", \r\n  portDestinationList : \"Destination Port\", \r\n  portOriginList : \"Port of Origin\", \r\n  searchValue : \"Search Value\",\r\n  relation : \"Relation\",\r\n  searchBy : \"Search By\",\r\n  queryBuilder : \"Additional\"\r\n\r\n  }\r\n\r\n\r\n const  Markets = (props) => {\r\n  const history = useHistory();\r\n\r\n  const userId = localStorage.getItem(\"userToken\");\r\n  let userData = localStorage.getItem(\"user\");\r\n  userData = userData ? JSON.parse(userData) : {};\r\n\r\n  const [searchList, setSearchList] = useState([]);\r\n  const [searchListData, setSearchListData] = useState([]);\r\n  const [sortName, setSortName] = useState(undefined);\r\n  const [sortOrder, setSortOrder] = useState(undefined);\r\n\r\n\r\n  const getSearchList = () => {\r\n\r\n    let userID = \"\"\r\n    userID = userData && userData.uplineId == 0 ? \"uplineId\" : \"userId\" ;\r\n    props.loadingStart()\r\n    Axios({\r\n      method: \"GET\",\r\n      url: `search-management/search/listAll?${userID}=${userId}`\r\n    })\r\n      .then(res => {\r\n        let tempQueryList = []\r\n        if(res.data.queryList && res.data.queryList.length > 0){      \r\n          res.data.queryList.map((item,index)=> {   \r\n            let jsonData = {} \r\n            Object.keys(item).map((key,Val)=>{    \r\n              if(key != \"userSearchQuery\"){\r\n                jsonData[key] = item[key] \r\n              }\r\n              else {\r\n                Object.keys(item[\"userSearchQuery\"]).map((subKey,subVal)=>{\r\n                  if(subKey != \"searchId\"){\r\n                    jsonData[subKey] = item[\"userSearchQuery\"][subKey]\r\n                    jsonData['querySting'] = searchBYList ? Object.keys(searchBYList).map((item2, index2) => (\r\n                      item2 == \"queryBuilder\" && item[\"userSearchQuery\"][item2] ? (\r\n                          item[\"userSearchQuery\"][item2].map((subitem, subindex) => (\r\n                            `<b>${searchBYList[item2]+(subindex+1)}</b>` +\" : \"+\r\n                            `<b>${searchBYList[\"relation\"]}</b>` +\" : \"+ subitem.relation + \" ,&nbsp \"+ `<b>${searchBYList[\"searchBy\"]}</b>` +\" : \"+ subitem.searchBy + \" ,&nbsp \"+ `<b>${searchBYList[\"searchValue\"]}</b>` +\" : \"+ subitem.searchValue\r\n                          ))\r\n                        ) : \r\n                        (item[\"userSearchQuery\"][item2] != \"\" && item[\"userSearchQuery\"][item2] != null ? `<b>&nbsp;${searchBYList[item2]}</b>` +\" : \"+ item[\"userSearchQuery\"][item2] : null)\r\n                      )) : null\r\n                  }\r\n                })\r\n              }\r\n            })\r\n            tempQueryList.push(jsonData)     \r\n          })\r\n        }\r\n        setSearchList(tempQueryList);\r\n        setSearchListData(tempQueryList);\r\n        props.loadingStop()\r\n      })\r\n      .catch(err => {\r\n        console.log(\"Err\", err);\r\n        props.loadingStop()\r\n      });\r\n  }\r\n\r\n  function onSortChange(sortName, sortOrder) {\r\n    setSortName(sortName);\r\n    setSortOrder(sortOrder);\r\n  }\r\n\r\n  useEffect(() => {\r\n    getSearchList();\r\n  }, []);\r\n\r\n  const searchTypeFormat = (cell,row) => {\r\n    return cell.searchType \r\n  }\r\n\r\n  const QueryFormat =(cell,row,enumObject, index) => {\r\n    \r\n      // let textString  =  searchBYList ? Object.keys(searchBYList).map((item, index) => (\r\n      //   item == \"queryBuilder\" && row[item] && row[item].length > 0 ? (\r\n      //     row[item].map((subitem, subindex) => (\r\n      //       `<b>${searchBYList[item]+(subindex+1)}</b>` +\" : \"+\r\n      //       `<b>${searchBYList[\"relation\"]}</b>` +\" : \"+ subitem.relation + \" , \"+ `<b>${searchBYList[\"searchBy\"]}</b>` +\" : \"+ subitem.searchBy + \" , \"+ `<b>${searchBYList[\"searchValue\"]}</b>` +\" : \"+ subitem.searchValue\r\n      //     ))\r\n      //   ) : \r\n      //   (row[item] != \"\" && row[item] != null ? `<b>${searchBYList[item]}</b>` +\" : \"+ row[item] : null)\r\n      // )) : null\r\n\r\n\r\n\r\n      let res = cell.filter(elements => {\r\n        return elements !== null;\r\n        });\r\n      return (res)\r\n  \r\n  }\r\n\r\n  const tradeTypeFormat = (cell,row) => {\r\n    return cell.tradeType \r\n  }\r\n\r\n  const countryFormat = (cell,row) => {\r\n    return cell.countryCode \r\n  }\r\n\r\n  const periodFormat = (cell, row) => {\r\n    return moment(row.fromDate).format(\"MMM. DD, YYYY\") + \" - \" + moment(row.toDate).format(\"MMM. DD, YYYY\");\r\n  }\r\n\r\n  const searchedOnFormat = (cell,row) => {\r\n    return moment(row.createdDate).format(\"MMM. DD, YYYY, h:mm:ss a\")\r\n  }\r\n\r\n  const searchedByFormat = (cell,row) => {\r\n    return cell + \" [ \" +row.createdByEmail+ \" ]\"\r\n  }\r\n\r\n\r\n  const actionFormatter = (cell,row) => {\r\n    return (<div> <button onClick={() => {\r\n      history.push({\r\n        pathname: '/list',\r\n        state: {\r\n          search_id: cell, workspace_id: \"NIL\"\r\n        }\r\n      })\r\n    }} className=\"effect-btn btn btn-primary mt-2 mr-2 icon-lg\"><i className=\"icon ion-md-search\"></i></button>\r\n    </div>)\r\n  }\r\n\r\n  const options = {\r\n    sortName: sortName,\r\n    sortOrder: sortOrder,\r\n    onSortChange: onSortChange\r\n  };\r\n\r\n  const indexN = (cell,row,enumObject, index) => {\r\n    return  (<div>{index+1}</div>);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container-fluid\">\r\n\r\n        <div className=\"row\">\r\n          <div className=\"col-md-12 list-page mt-3\">\r\n    \r\n          <div className=\"row\">\r\n          <div className=\"col-lg-12 grid-margin stretch-card\">\r\n            <div className=\"card\">\r\n              <div className=\"card-body\">\r\n                <h4 className=\"card-title\">Search History</h4>\r\n                <div >\r\n                <BootstrapTable  data={searchList} striped hover \r\n                    pagination={ true } search\r\n                    options={ options }\r\n                >\r\n                    <TableHeaderColumn width='50' isKey dataField='id' dataFormat={ indexN }>Sl No</TableHeaderColumn>\r\n                    <TableHeaderColumn width='100' dataField='searchType'  dataSort={ true }>Search Type</TableHeaderColumn>\r\n                    <TableHeaderColumn width='520' dataField='querySting' dataFormat={ QueryFormat } dataSort={ true }>Query</TableHeaderColumn>\r\n                    <TableHeaderColumn width='100' dataField='tradeType' dataSort={ true }>Trade Type</TableHeaderColumn>\r\n                    <TableHeaderColumn width='80' dataField='countryCode'  dataSort={ true }>Country</TableHeaderColumn>\r\n                    <TableHeaderColumn width='150' dataField='userSearchQuery' dataFormat={ periodFormat } dataSort={ true }>Period</TableHeaderColumn>\r\n                    <TableHeaderColumn width='100' dataField='totalRecords'  dataSort={ true }>Total Records</TableHeaderColumn>\r\n                   { userData && userData.uplineId == 0 ?\r\n                    <TableHeaderColumn width='150' dataField='createdByName' dataFormat={ searchedByFormat } dataSort={ true }>Searched By</TableHeaderColumn> : null\r\n                   }\r\n                    <TableHeaderColumn width='160' dataField='userSearchQuery' dataFormat={ searchedOnFormat } dataSort={ true }>Searched On</TableHeaderColumn>\r\n                    <TableHeaderColumn width='50' dataField='searchId'  dataFormat={ actionFormatter }>Action</TableHeaderColumn>\r\n                </BootstrapTable>\r\n\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          </div>\r\n\r\n          </div>\r\n        </div>\r\n\r\n\r\n      </div>\r\n\r\n\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loading: state.loader.loading,\r\n    download_count: state.data.download_count,\r\n    subscriptionId: state.data.subscriptionId,\r\n    dataAccess_count: state.data.dataAccess_count,\r\n    totalWorkspace: state.data.totalWorkspace,\r\n    subUserCount: state.data.subUserCount,\r\n    queryPerDay: state.data.queryPerDay,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    loadingStart: () => dispatch(loaderStart()),\r\n    loadingStop: () => dispatch(loaderStop()),\r\n    updateSubscriptionCount: (data) => dispatch(updateSubscriptionCount(data)), \r\n  };\r\n};\r\nexport default withRouter (connect( mapStateToProps, mapDispatchToProps)(Markets));\r\n","export default __webpack_public_path__ + \"static/media/pencil-square.75d078b5.svg\";"],"sourceRoot":""}