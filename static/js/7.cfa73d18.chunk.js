(this.webpackJsonpcrypo=this.webpackJsonpcrypo||[]).push([[7],{1011:function(e,t,a){"use strict";a.r(t);var s=a(4),i=a(1),n=a(46),c=a(18),o=a.n(c),r=a(118),l=a(30),d=a(32),m=a(21),j=a.n(m),b=a(0),u=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,h={firstname:"",lastname:"",mobile:"",email:"",company_name:u.companyName,download_limit:0,password:"",isActive:""},p=d.b().shape({firstname:d.c().required("Please enter first name"),lastname:d.c().required("Please enter last name"),email:d.c().email().required("Please enter valid email address"),mobile:d.c().required("Please enter valid mobile no"),company_name:d.c().required("This field is required"),download_limit:d.c().required("This field is required"),password:d.c().required("This field is required"),isActive:d.c().required("This field is required")}),O=function(e){var t=Object.assign(h,{download_limit:e.download_count}),a=Object(i.useState)([]),c=Object(s.a)(a,2),o=(c[0],c[1],Object(i.useState)([])),d=Object(s.a)(o,2),m=(d[0],d[1]);return Object(i.useEffect)((function(){Object(r.a)({method:"GET",url:"masterdata-management/subscription/list"}).then((function(e){m(e.data.subscriptionList)})).catch((function(e){m([])}))}),[]),Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-lg-12 grid-margin stretch-card",children:Object(b.jsx)("div",{className:"card",children:Object(b.jsx)("div",{className:"card-body",children:Object(b.jsx)("div",{className:"table-responsive",children:Object(b.jsx)(l.d,{initialValues:t,validationSchema:p,onSubmit:function(t){e.loaderStart();var a={firstname:t.firstname,lastname:t.lastname,email:t.email,mobile:t.mobile,companyName:t.company_name,downloadLimit:t.download_limit,userType:"USER",password:t.password,isActive:t.isActive,uplineId:u.userid};t.download_limit<=e.download_count?Object(n.a)({method:"POST",url:"user-management/user",data:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(t){j.a.fire({title:"Thank You",text:"User created successfully",icon:"success"}).then((function(t){t&&(e.UpdateSubscription({subUserCount:e.subUserCount-1}),e.OnUserCreate(),e.loaderStop())}))})).catch((function(e){console.log("Err",e);var t="Somethhing went wrong, please try again.";e.data.errorMsg&&(t=e.data.errorMsg),j.a.fire({title:"Oops!",text:t,icon:"error"})})):j.a.fire({title:"Oops!",text:"Download Limit should be less than total limit",icon:"error"})},children:function(e){e.values;var t=e.errors,a=e.setFieldValue,s=(e.setFieldError,e.touched),i=(e.isValid,e.handleSubmit);e.submitForm;return Object(b.jsxs)(l.c,{children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"First Name"})}),Object(b.jsx)(l.a,{name:"firstname",type:"text",className:"form-control ".concat(s.firstname&&t.firstname?"is-invalid":""),placeholder:"First Name",autoComplete:"off",onChange:function(e){a("firstname",e.target.value)}}),s.firstname&&t.firstname&&Object(b.jsx)("p",{className:"error",children:t.firstname})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Last Name"})}),Object(b.jsx)(l.a,{name:"lastname",type:"text",className:"form-control ".concat(s.lastname&&t.lastname?"is-invalid":""),placeholder:"Last Name",autoComplete:"off",onChange:function(e){a("lastname",e.target.value)}}),s.lastname&&t.lastname&&Object(b.jsx)("p",{className:"error",children:t.lastname})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Email"})}),Object(b.jsx)(l.a,{name:"email",type:"text",className:"form-control ".concat(s.email&&t.email?"is-invalid":""),placeholder:"Email Address",autoComplete:"off",onChange:function(e){a("email",e.target.value)}}),s.email&&t.email&&Object(b.jsx)("p",{className:"error",children:t.email})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Mobile"})}),Object(b.jsx)(l.a,{name:"mobile",type:"text",className:"form-control ".concat(s.mobile&&t.mobile?"is-invalid":""),placeholder:"Mobile No",autoComplete:"off",onChange:function(e){a("mobile",e.target.value)}}),s.mobile&&t.mobile&&Object(b.jsx)("p",{className:"error",children:t.mobile})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Password"})}),Object(b.jsx)(l.a,{name:"password",type:"password",className:"form-control ".concat(s.password&&t.password?"is-invalid":""),placeholder:"Password",autoComplete:"off",onChange:function(e){a("password",e.target.value)}}),s.password&&t.password&&Object(b.jsx)("p",{className:"error",children:t.password})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Company Name"})}),Object(b.jsx)(l.a,{name:"company_name",type:"text",className:"form-control ".concat(s.company_name&&t.company_name?"is-invalid":""),placeholder:"Company Name",autoComplete:"off",onChange:function(e){a("company_name",e.target.value)}}),s.company_name&&t.company_name&&Object(b.jsx)("p",{className:"error",children:t.company_name})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Assigned Download Limit"})}),Object(b.jsx)(l.a,{name:"download_limit",type:"text",className:"form-control ".concat(s.download_limit&&t.download_limit?"is-invalid":""),placeholder:"Download Limit",autoComplete:"off",onChange:function(e){a("download_limit",e.target.value)}}),s.download_limit&&t.download_limit&&Object(b.jsx)("p",{className:"error",children:t.download_limit})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Status"})}),Object(b.jsxs)(l.a,{name:"isActive",component:"select",className:"form-control ".concat(s.isActive&&t.isActive?"is-invalid":""),autoComplete:"off",onChange:function(e){a("isActive",e.target.value)},children:[Object(b.jsx)("option",{value:"",children:"Please Select"}),Object(b.jsx)("option",{value:"Y",children:"ACTIVE"}),Object(b.jsx)("option",{value:"N",children:"IN-ACTIVE"}),s.isActive&&t.isActive&&Object(b.jsx)("p",{className:"error",children:t.isActive})]})]}),Object(b.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),i()},className:"btn btn-primary",children:"Create Account"})]})}})})})})})})})},f=d.b().shape({firstname:d.c().required("Please enter first name"),lastname:d.c().required("Please enter last name"),email:d.c().email().required("Please enter valid email address"),mobile:d.c().required("Please enter valid mobile no"),companyName:d.c().required("This field is required"),downloadLimit:d.c().required("This field is required"),isActive:d.c().required("This field is required"),password:d.c().required("This field is required")}),x=function(e){var t={firstname:e.rowData.firstname,lastname:e.rowData.lastname,mobile:e.rowData.mobile,email:e.rowData.email,companyName:e.rowData.companyName,downloadLimit:e.download_count,isActive:e.rowData.isActive,password:e.rowData.password},a=Object(i.useState)([]),c=Object(s.a)(a,2);c[0],c[1];return Object(i.useEffect)((function(){}),[]),Object(b.jsx)("div",{children:Object(b.jsx)(l.d,{initialValues:t,validationSchema:f,onSubmit:function(t){var a={firstname:t.firstname,lastname:t.lastname,email:t.email,mobile:t.mobile,companyName:t.companyName,downloadLimit:t.downloadLimit,isActive:t.isActive,password:t.password};console.log("Props ==== ",e),t.downloadLimit<=e.download_count?Object(n.a)({method:"PUT",url:"user-management/user/".concat(e.rowData.id),data:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(t){console.log("user",t.data),j.a.fire({title:"Thank You",text:"User update is successful",icon:"success"}).then((function(){e.modalSubmit()}))})).catch((function(e){console.log("Err",e);var t="Somethhing went wrong, please try again.";e.data.errorMsg&&(t=e.data.errorMsg),j.a.fire({title:"Oops!",text:t,icon:"error"})})):j.a.fire({title:"Oops!",text:"Download Limit should be less than total limit",icon:"error"})},children:function(e){e.values;var t=e.errors,a=e.setFieldValue,s=(e.setFieldError,e.touched);e.isValid,e.handleSubmit,e.submitForm;return Object(b.jsxs)(l.c,{children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"First Name"})}),Object(b.jsx)(l.a,{name:"firstname",type:"text",className:"form-control ".concat(s.firstname&&t.firstname?"is-invalid":""),placeholder:"First Name",onChange:function(e){a("firstname",e.target.value)}}),s.firstname&&t.firstname&&Object(b.jsx)("p",{className:"error",children:t.firstname})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Last Name"})}),Object(b.jsx)(l.a,{name:"lastname",type:"text",className:"form-control ".concat(s.lastname&&t.lastname?"is-invalid":""),placeholder:"Last Name",onChange:function(e){a("lastname",e.target.value)}}),s.lastname&&t.lastname&&Object(b.jsx)("p",{className:"error",children:t.lastname})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Email"})}),Object(b.jsx)(l.a,{name:"email",type:"text",className:"form-control ".concat(s.email&&t.email?"is-invalid":""),placeholder:"Email Address",onChange:function(e){a("email",e.target.value)}}),s.email&&t.email&&Object(b.jsx)("p",{className:"error",children:t.email})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Mobile"})}),Object(b.jsx)(l.a,{name:"mobile",type:"text",className:"form-control ".concat(s.mobile&&t.mobile?"is-invalid":""),placeholder:"Mobile No",onChange:function(e){a("mobile",e.target.value)}}),s.mobile&&t.mobile&&Object(b.jsx)("p",{className:"error",children:t.mobile})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Password"})}),Object(b.jsx)(l.a,{name:"password",type:"password",className:"form-control ".concat(s.password&&t.password?"is-invalid":""),placeholder:"Password",onChange:function(e){a("password",e.target.value)}}),s.password&&t.password&&Object(b.jsx)("p",{className:"error",children:t.password})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Company Name"})}),Object(b.jsx)(l.a,{name:"companyName",type:"text",className:"form-control ".concat(s.companyName&&t.companyName?"is-invalid":""),placeholder:"Company Name",onChange:function(e){a("companyName",e.target.value)}}),s.companyName&&t.companyName&&Object(b.jsx)("p",{className:"error",children:t.companyName})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Assigned Download Limit"})}),Object(b.jsx)(l.a,{name:"downloadLimit",type:"text",className:"form-control ".concat(s.downloadLimit&&t.downloadLimit?"is-invalid":""),placeholder:"Download Limit",onChange:function(e){a("downloadLimit",e.target.value)}}),s.downloadLimit&&t.downloadLimit&&Object(b.jsx)("p",{className:"error",children:t.downloadLimit})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{children:Object(b.jsx)("b",{children:"Status"})}),Object(b.jsxs)(l.a,{name:"isActive",component:"select",className:"form-control ".concat(s.isActive&&t.isActive?"is-invalid":""),autoComplete:"off",onChange:function(e){a("isActive",e.target.value)},children:[Object(b.jsx)("option",{value:"",children:"Please Select"}),Object(b.jsx)("option",{value:"Y",children:"Active"}),Object(b.jsx)("option",{value:"N",children:"Inactive"}),s.isActive&&t.isActive&&Object(b.jsx)("p",{className:"error",children:t.isActive})]})]}),Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update User"})]})}})})},v=a(206),N=a(57),g=a(45),w=a(72),y=a(43);t.default=Object(y.i)(Object(w.b)((function(e){return{loading:e.loader.loading,download_count:e.data.download_count,subscriptionId:e.data.subscriptionId,dataAccess_count:e.data.dataAccess_count,totalWorkspace:e.data.totalWorkspace,subUserCount:e.data.subUserCount}}),(function(e){return{loadingStart:function(){return e(Object(N.a)())},loadingStop:function(){return e(Object(N.b)())},updateSubscriptionCount:function(t){return e(Object(g.h)(t))}}}))((function(e){var t=localStorage.getItem("userToken"),a=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,c=Object(i.useState)([]),r=Object(s.a)(c,2),l=r[0],d=r[1],m=Object(i.useState)([]),u=Object(s.a)(m,2),h=u[0],p=u[1],f=Object(i.useState)(!1),N=Object(s.a)(f,2),g=N[0],w=N[1],y=Object(i.useState)(!1),C=Object(s.a)(y,2),S=C[0],A=C[1],L=Object(i.useState)(!1),_=Object(s.a)(L,2),D=_[0],U=_[1],T=function(){e.loadingStart();var s=[{firstname:a.firstname,lastname:a.lastname,email:a.email,mobile:a.mobile,isActive:a.isActive,createdDate:a.createdDate?o()(a.createdDate).format("YYYY-MM-DD"):null,id:a.userid}],i=[{firstname:a.firstname,lastname:a.lastname,email:a.email,mobile:a.mobile,isActive:a.isActive,createdDate:a.createdDate?o()(a.createdDate).format("YYYY-MM-DD"):null,password:a.password,companyName:a.companyName,id:a.userid}];Object(n.a)({method:"GET",url:"user-management/user/list?uplineId=".concat(t)}).then((function(t){t.data.userList.forEach((function(e){var t={firstname:e.firstname,lastname:e.lastname,email:e.email,mobile:e.mobile,isActive:e.isActive,createdDate:e.createdDate?o()(e.createdDate).format("YYYY-MM-DD"):null,password:e.password,companyName:e.companyName,downloadLimit:e.downloadLimit,id:e.id};s.push(t),i.push(t)})),d(s),p(i),e.loadingStop()})).catch((function(t){console.log("Err",t),e.loadingStop()}))},q=function(){w(!1)};return Object(i.useEffect)((function(){T()}),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-md-12 list-page mt-3",children:[Object(b.jsxs)("div",{className:"search-ar mt-2 mb-2",children:[Object(b.jsx)("h2",{className:"headl",children:"Users"}),"\xa0\xa0",Object(b.jsx)("button",{onClick:function(t){t.target.value,e.subUserCount>0?j.a.fire({title:"Create User !",text:"Available Limit ".concat(e.subUserCount,". \n Are you sure you want to Create New User ?"),icon:"warning",dangerMode:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then((function(e){e.value&&w(!0)})):j.a.fire({title:"Create User !",text:"Your User Limit Exhausted",icon:"error",dangerMode:!0,confirmButtonColor:"#3085d6"}).then((function(e){}))},children:"Add User"}),Object(b.jsx)("div",{className:"wrap float-right",children:Object(b.jsxs)("div",{className:"search",children:[Object(b.jsx)("input",{type:"text",onChange:function(e){!function(e){console.log("text",e);var t=l.filter((function(t){return t.firstname.toLowerCase().includes(e.toLowerCase())||t.lastname.toLowerCase().includes(e.toLowerCase())}));p(t)}(e.target.value)},className:"searchTerm",placeholder:"What are you looking for?"}),Object(b.jsx)("button",{type:"submit",className:"searchButton",children:Object(b.jsx)("i",{className:"icon ion-md-search"})})]})})]}),Object(b.jsxs)("table",{className:"table table-striped table-hover",children:[Object(b.jsx)("thead",{className:"",children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"SL No."}),Object(b.jsx)("th",{children:"Firstname"}),Object(b.jsx)("th",{children:"Last Name"}),Object(b.jsx)("th",{children:"Company Name"}),Object(b.jsx)("th",{children:"Email Id"}),Object(b.jsx)("th",{children:"Mobile"}),Object(b.jsx)("th",{children:"Available Download Limit"}),Object(b.jsx)("th",{children:"Status"}),Object(b.jsx)("th",{children:"Created On"}),Object(b.jsx)("th",{children:"Actions"})]})}),Object(b.jsx)("tbody",{children:h.length>0?h.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsxs)("td",{children:[t+1,"."]}),Object(b.jsx)("td",{children:e.firstname}),Object(b.jsx)("td",{children:e.lastname?e.lastname:""}),Object(b.jsx)("td",{children:e.companyName?e.companyName:""}),Object(b.jsx)("td",{children:e.email?e.email:""}),Object(b.jsx)("td",{children:e.mobile?e.mobile:""}),Object(b.jsx)("td",{children:e.downloadLimit?e.downloadLimit:""}),Object(b.jsx)("td",{children:e.isActive&&"Y"==e.isActive?"Active":"Inactive"}),Object(b.jsx)("td",{children:e.createdDate?e.createdDate:""}),Object(b.jsxs)("td",{children:[t>=1?Object(b.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){var t;t=e.id,j.a.fire({title:"Remove",text:" Are you sure you want to Remove the user?",icon:"warning",dangerMode:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then((function(e){e.isConfirmed&&Object(n.a)({method:"PUT",url:"user-management/deleteuser/".concat(t),data:JSON.stringify({isDelete:"Y"}),headers:{"Content-Type":"application/json"}}).then((function(e){j.a.fire({title:"Remove",text:" User removed successfully",icon:"success"}).then(T())})).catch((function(e){console.log("Err",e)}))}))},children:Object(b.jsx)("i",{className:"icon ion-ios-trash"})}):null," \xa0",Object(b.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){!function(e){A(!0),U(e)}(e)},children:Object(b.jsx)("i",{className:"fa fa-pencil"})})]})]},t)})):Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:"7",style:{textAlign:"center"},children:"No record found"})})})]})]})}),Object(b.jsx)("div",{children:g?Object(b.jsxs)(v.a,{className:"",bssize:"md",show:g,onHide:q,children:[Object(b.jsx)(v.a.Header,{closeButton:!0,children:" Create User "}),Object(b.jsx)(v.a.Title,{children:"  "}),Object(b.jsx)(v.a.Body,{style:{height:"80vh",overflow:"auto",scrollbarWidth:"10px"},children:Object(b.jsx)("div",{children:Object(b.jsx)(O,{UpdateSubscription:function(t){Object(n.a)({method:"PUT",url:"user-management/user-subscription/update/".concat(e.subscriptionId),data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(t){e.updateSubscriptionCount({download_count:e.download_count,subscriptionId:e.subscriptionId,dataAccess_count:e.dataAccess_count,totalWorkspace:e.totalWorkspace,subUserCount:e.subUserCount-1})})).catch((function(e){console.log("Err",e)}))},OnUserCreate:function(){q(),T()},subUserCount:e.subUserCount,download_count:e.download_count,subscriptionId:e.subscriptionId,loaderStart:e.loadingStart,loaderStop:e.loadingStop})})})]}):null}),Object(b.jsx)("div",{children:S?Object(b.jsxs)(v.a,{className:"",bssize:"md",show:S,onHide:function(){A(!1)},children:[Object(b.jsx)(v.a.Header,{closeButton:!0,children:" Edit User "}),Object(b.jsx)(v.a.Title,{children:"  "}),Object(b.jsx)(v.a.Body,{style:{height:"80vh",overflow:"auto",scrollbarWidth:"10px"},children:Object(b.jsx)("div",{children:Object(b.jsx)(x,{rowData:D,download_count:e.download_count,modalSubmit:function(e){w(!1),A(!1),T()}})})})]}):null})]})})})))}}]);
//# sourceMappingURL=7.cfa73d18.chunk.js.map